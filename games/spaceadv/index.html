<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Space Adventure</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      color: #f7f7f7;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }
    
    .game-container {
      max-width: 800px;
      width: 100%;
      margin-top: 20px;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(108, 92, 231, 0.5);
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.8rem;
      font-weight: 700;
    }
    
    .logo i {
      color: #fd79a8;
    }
    
    .back-button {
      background: linear-gradient(45deg, #6c5ce7, #a29bfe);
      color: white;
      padding: 8px 20px;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .back-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
    }
    
    .game-title {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 10px;
      background: linear-gradient(to right, #ff9a9e, #fad0c4, #a18cd1);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .game-description {
      text-align: center;
      color: #b2bec3;
      margin-bottom: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .stats {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 25px;
    }
    
    .stat-box {
      background: rgba(255, 255, 255, 0.08);
      padding: 15px 25px;
      border-radius: 10px;
      text-align: center;
      min-width: 120px;
    }
    
    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #6c5ce7;
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: #b2bec3;
    }
    
    .game-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    
    canvas {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    .control-button {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .control-button:hover {
      background: rgba(108, 92, 231, 0.7);
    }
    
    .instructions {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      max-width: 500px;
    }
    
    .instructions h3 {
      color: #6c5ce7;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .instructions ul {
      padding-left: 20px;
      color: #b2bec3;
      line-height: 1.6;
    }
    
    .instructions li {
      margin-bottom: 8px;
    }
    
    .win-message {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s;
    }
    
    .win-message.show {
      opacity: 1;
      pointer-events: all;
    }
    
    .win-content {
      background: #1a1a2e;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      transform: scale(0.8);
      transition: transform 0.5s;
    }
    
    .win-message.show .win-content {
      transform: scale(1);
    }
    
    .win-title {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #6c5ce7;
    }
    
    .win-stats {
      font-size: 1.2rem;
      margin-bottom: 30px;
      color: #b2bec3;
    }
    
    .win-button {
      background: linear-gradient(45deg, #6c5ce7, #a29bfe);
      color: white;
      padding: 12px 40px;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .win-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
    }
    
    @media (max-width: 600px) {
      .stats {
        gap: 15px;
      }
      
      .stat-box {
        padding: 10px 15px;
        min-width: 90px;
      }
      
      .stat-value {
        font-size: 1.5rem;
      }
      
      canvas {
        width: 100%;
        height: auto;
      }
      
      .game-title {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="header">
      <div class="logo">
        <i class="fas fa-gamepad"></i>
        <span>GameHub</span>
      </div>
      <button class="back-button" id="backButton">
        <i class="fas fa-arrow-left"></i> Back to Hub
      </button>
    </div>
    
    <h1 class="game-title">Space Adventure</h1>
    <p class="game-description">Navigate through asteroid fields and alien fleets in this action-packed space shooter. Upgrade your ship and save the galaxy!</p>
    
    <div class="stats">
      <div class="stat-box">
        <div class="stat-value" id="score">0</div>
        <div class="stat-label">Score</div>
      </div>
      <div class="stat-box">
        <div class="stat-value" id="lives">3</div>
        <div class="stat-label">Lives</div>
      </div>
      <div class="stat-box">
        <div class="stat-value" id="level">1</div>
        <div class="stat-label">Level</div>
      </div>
    </div>
    
    <div class="game-area">
      <canvas id="gameCanvas" width="600" height="500"></canvas>
      
      <div class="controls">
        <button class="control-button" id="restartButton" tabindex="-1">
          <i class="fas fa-redo"></i> Restart Game
        </button>
        <button class="control-button" id="pauseButton" tabindex="-1">
          <i class="fas fa-pause"></i> Pause
        </button>
      </div>
      
      <div class="instructions">
        <h3><i class="fas fa-info-circle"></i> How to Play</h3>
        <ul>
          <li>Use <strong>Arrow Keys</strong> to move your spaceship</li>
          <li>Press <strong>Spacebar</strong> to shoot</li>
          <li>Destroy asteroids and enemy ships to earn points</li>
          <li>Avoid collisions to preserve your ship</li>
          <li>Collect power-ups for special abilities</li>
          <li>Difficulty increases gradually over time</li>
        </ul>
      </div>
    </div>
  </div>
  
  <div class="win-message" id="winMessage">
    <div class="win-content">
      <h2 class="win-title">Game Over!</h2>
      <p class="win-stats">Your score: <span id="finalScore">0</span></p>
      <p class="win-stats">Level reached: <span id="finalLevel">1</span></p>
      <button class="win-button" id="playAgainButton">Play Again</button>
    </div>
  </div>

  <script>
    // Game configuration
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // Game state
    let player = {
      x: canvas.width / 2 - 25,
      y: canvas.height - 80,
      width: 50,
      height: 70,
      speed: 7,
      color: '#6c5ce7',
      lasers: [],
      lastShot: 0
    };
    
    let enemies = [];
    let asteroids = [];
    let particles = [];
    let powerups = [];
    let score = 0;
    let lives = 3;
    let level = 1;
    let gameRunning = false;
    let gameOver = false;
    let animationId;
    let gameStartTime = 0;
    let currentTime = 0;
    
    // DOM elements
    const scoreElement = document.getElementById('score');
    const livesElement = document.getElementById('lives');
    const levelElement = document.getElementById('level');
    const restartButton = document.getElementById('restartButton');
    const pauseButton = document.getElementById('pauseButton');
    const winMessage = document.getElementById('winMessage');
    const finalScore = document.getElementById('finalScore');
    const finalLevel = document.getElementById('finalLevel');
    const playAgainButton = document.getElementById('playAgainButton');
    const backButton = document.getElementById('backButton');
    
    // Initialize game
    function initGame() {
      player = {
        x: canvas.width / 2 - 25,
        y: canvas.height - 80,
        width: 50,
        height: 70,
        speed: 7,
        color: '#6c5ce7',
        lasers: [],
        lastShot: 0
      };
      
      enemies = [];
      asteroids = [];
      particles = [];
      powerups = [];
      score = 0;
      lives = 3;
      level = 1;
      gameRunning = true;
      gameOver = false;
      gameStartTime = Date.now();
      currentTime = 0;
      
      // Update UI
      scoreElement.textContent = score;
      livesElement.textContent = lives;
      levelElement.textContent = level;
      winMessage.classList.remove('show');
      
      // Start game loop
      if (animationId) cancelAnimationFrame(animationId);
      gameLoop();
      
      // Start enemy spawner
      spawnEnemies();
      spawnAsteroids();
    }
    
    // Draw player ship
    function drawPlayer() {
      ctx.fillStyle = player.color;
      
      // Draw ship body
      ctx.beginPath();
      ctx.moveTo(player.x + player.width/2, player.y);
      ctx.lineTo(player.x, player.y + player.height);
      ctx.lineTo(player.x + player.width, player.y + player.height);
      ctx.closePath();
      ctx.fill();
      
      // Draw ship details
      ctx.fillStyle = '#a29bfe';
      ctx.fillRect(player.x + player.width/2 - 10, player.y + 20, 20, 20);
      
      ctx.fillStyle = '#fd79a8';
      ctx.beginPath();
      ctx.arc(player.x + player.width/2, player.y + 60, 8, 0, Math.PI * 2);
      ctx.fill();
    }
    
    // Spawn enemies
    function spawnEnemies() {
      if (!gameRunning) return;
      
      // Difficulty increases with time played
      const timeFactor = Math.min(currentTime / 60000, 5); // Max difficulty after 5 minutes
      const enemyCount = Math.floor(2 + timeFactor * 2);
      
      for (let i = 0; i < enemyCount; i++) {
        enemies.push({
          x: Math.random() * (canvas.width - 40),
          y: Math.random() * 200,
          width: 40,
          height: 40,
          speed: 1 + timeFactor * 0.8, // Gradually increases speed
          color: '#e17055',
          health: 1,
          lastShot: Date.now() - 2000
        });
      }
      
      // Spawn interval decreases with time
      const spawnInterval = Math.max(3000 - timeFactor * 500, 1000);
      setTimeout(spawnEnemies, spawnInterval);
    }
    
    // Spawn asteroids
    function spawnAsteroids() {
      if (!gameRunning) return;
      
      // Difficulty increases with time played
      const timeFactor = Math.min(currentTime / 60000, 5); // Max difficulty after 5 minutes
      const asteroidCount = Math.floor(1 + timeFactor * 1.5);
      
      for (let i = 0; i < asteroidCount; i++) {
        const size = 30 + Math.random() * 30;
        asteroids.push({
          x: Math.random() * (canvas.width - size),
          y: -size,
          width: size,
          height: size,
          speed: 2 + timeFactor * 1.5, // Gradually increases speed
          color: '#b2bec3',
          rotation: Math.random() * Math.PI * 2,
          rotationSpeed: (Math.random() - 0.5) * 0.1
        });
      }
      
      // Spawn interval decreases with time
      const spawnInterval = Math.max(2500 - timeFactor * 400, 1000);
      setTimeout(spawnAsteroids, spawnInterval);
    }
    
    // Spawn powerup
    function spawnPowerup(x, y) {
      powerups.push({
        x: x,
        y: y,
        width: 20,
        height: 20,
        speed: 2,
        type: Math.random() > 0.5 ? 'life' : 'weapon',
        color: Math.random() > 0.5 ? '#00b894' : '#fdcb6e'
      });
    }
    
    // Create explosion
    function createExplosion(x, y, color, count = 20) {
      for (let i = 0; i < count; i++) {
        particles.push({
          x: x,
          y: y,
          size: 2 + Math.random() * 4,
          speedX: (Math.random() - 0.5) * 5,
          speedY: (Math.random() - 0.5) * 5,
          color: color,
          life: 30 + Math.random() * 30
        });
      }
    }
    
    // Draw lasers
    function drawLasers() {
      player.lasers.forEach((laser, index) => {
        laser.y -= laser.speed;
        
        if (laser.y < 0) {
          player.lasers.splice(index, 1);
          return;
        }
        
        ctx.fillStyle = laser.color;
        ctx.fillRect(laser.x, laser.y, laser.width, laser.height);
      });
    }
    
    // Draw enemies
    function drawEnemies() {
      enemies.forEach((enemy, index) => {
        enemy.y += enemy.speed * 0.2;
        enemy.x += Math.sin(Date.now() / 1000 + index) * 1.5;
        
        // Enemy shooting
        if (Date.now() - enemy.lastShot > 2000 && Math.random() < 0.02) {
          enemy.lasers = enemy.lasers || [];
          enemy.lasers.push({
            x: enemy.x + enemy.width/2 - 2,
            y: enemy.y + enemy.height,
            width: 4,
            height: 15,
            speed: 5,
            color: '#fd79a8'
          });
          enemy.lastShot = Date.now();
        }
        
        // Draw enemy lasers
        if (enemy.lasers) {
          enemy.lasers.forEach((laser, laserIndex) => {
            laser.y += laser.speed;
            
            if (laser.y > canvas.height) {
              enemy.lasers.splice(laserIndex, 1);
              return;
            }
            
            ctx.fillStyle = laser.color;
            ctx.fillRect(laser.x, laser.y, laser.width, laser.height);
            
            // Check collision with player
            if (
              laser.x < player.x + player.width &&
              laser.x + laser.width > player.x &&
              laser.y < player.y + player.height &&
              laser.y + laser.height > player.y
            ) {
              enemy.lasers.splice(laserIndex, 1);
              lives--;
              livesElement.textContent = lives;
              createExplosion(player.x + player.width/2, player.y + player.height/2, '#6c5ce7', 30);
              
              if (lives <= 0) {
                gameOver = true;
              }
            }
          });
        }
        
        // Draw enemy ship
        ctx.fillStyle = enemy.color;
        ctx.beginPath();
        ctx.moveTo(enemy.x + enemy.width/2, enemy.y + enemy.height);
        ctx.lineTo(enemy.x, enemy.y);
        ctx.lineTo(enemy.x + enemy.width, enemy.y);
        ctx.closePath();
        ctx.fill();
        
        // Draw enemy details
        ctx.fillStyle = '#ff7675';
        ctx.fillRect(enemy.x + enemy.width/2 - 5, enemy.y + 10, 10, 10);
      });
    }
    
    // Draw asteroids
    function drawAsteroids() {
      asteroids.forEach((asteroid, index) => {
        asteroid.y += asteroid.speed;
        asteroid.rotation += asteroid.rotationSpeed;
        
        if (asteroid.y > canvas.height) {
          asteroids.splice(index, 1);
          return;
        }
        
        ctx.save();
        ctx.translate(asteroid.x + asteroid.width/2, asteroid.y + asteroid.height/2);
        ctx.rotate(asteroid.rotation);
        ctx.fillStyle = asteroid.color;
        ctx.fillRect(-asteroid.width/2, -asteroid.height/2, asteroid.width, asteroid.height);
        
        // Draw asteroid details
        ctx.fillStyle = '#636e72';
        ctx.beginPath();
        ctx.arc(-asteroid.width/4, -asteroid.height/4, asteroid.width/6, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(asteroid.width/4, asteroid.height/4, asteroid.width/5, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.restore();
      });
    }
    
    // Draw particles
    function drawParticles() {
      particles.forEach((particle, index) => {
        particle.x += particle.speedX;
        particle.y += particle.speedY;
        particle.life--;
        
        if (particle.life <= 0) {
          particles.splice(index, 1);
          return;
        }
        
        ctx.globalAlpha = particle.life / 60;
        ctx.fillStyle = particle.color;
        ctx.beginPath();
        ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.globalAlpha = 1;
      });
    }
    
    // Draw powerups
    function drawPowerups() {
      powerups.forEach((powerup, index) => {
        powerup.y += powerup.speed;
        
        if (powerup.y > canvas.height) {
          powerups.splice(index, 1);
          return;
        }
        
        ctx.fillStyle = powerup.color;
        ctx.beginPath();
        ctx.arc(powerup.x + powerup.width/2, powerup.y + powerup.height/2, powerup.width/2, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = 'white';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(powerup.type === 'life' ? '+' : 'W', powerup.x + powerup.width/2, powerup.y + powerup.height/2);
      });
    }
    
    // Check collisions
    function checkCollisions() {
      // Player lasers vs enemies
      player.lasers.forEach((laser, laserIndex) => {
        enemies.forEach((enemy, enemyIndex) => {
          if (
            laser.x < enemy.x + enemy.width &&
            laser.x + laser.width > enemy.x &&
            laser.y < enemy.y + enemy.height &&
            laser.y + laser.height > enemy.y
          ) {
            player.lasers.splice(laserIndex, 1);
            enemy.health--;
            
            if (enemy.health <= 0) {
              enemies.splice(enemyIndex, 1);
              score += 100;
              scoreElement.textContent = score;
              createExplosion(enemy.x + enemy.width/2, enemy.y + enemy.height/2, '#e17055', 30);
              
              // Chance to spawn powerup
              if (Math.random() < 0.3) {
                spawnPowerup(enemy.x, enemy.y);
              }
            }
          }
        });
        
        // Player lasers vs asteroids
        asteroids.forEach((asteroid, asteroidIndex) => {
          if (
            laser.x < asteroid.x + asteroid.width &&
            laser.x + laser.width > asteroid.x &&
            laser.y < asteroid.y + asteroid.height &&
            laser.y + laser.height > asteroid.y
          ) {
            player.lasers.splice(laserIndex, 1);
            asteroid.width -= 10;
            asteroid.height -= 10;
            score += 20;
            scoreElement.textContent = score;
            createExplosion(laser.x, laser.y, '#b2bec3', 10);
            
            if (asteroid.width <= 10) {
              asteroids.splice(asteroidIndex, 1);
              createExplosion(asteroid.x + asteroid.width/2, asteroid.y + asteroid.height/2, '#b2bec3', 30);
            }
          }
        });
      });
      
      // Player vs enemies
      enemies.forEach((enemy, enemyIndex) => {
        if (
          player.x < enemy.x + enemy.width &&
          player.x + player.width > enemy.x &&
          player.y < enemy.y + enemy.height &&
          player.y + player.height > enemy.y
        ) {
          enemies.splice(enemyIndex, 1);
          lives--;
          livesElement.textContent = lives;
          createExplosion(enemy.x + enemy.width/2, enemy.y + enemy.height/2, '#e17055', 30);
          createExplosion(player.x + player.width/2, player.y + player.height/2, '#6c5ce7', 30);
          
          if (lives <= 0) {
            gameOver = true;
          }
        }
      });
      
      // Player vs asteroids
      asteroids.forEach((asteroid, asteroidIndex) => {
        if (
          player.x < asteroid.x + asteroid.width &&
          player.x + player.width > asteroid.x &&
          player.y < asteroid.y + asteroid.height &&
          player.y + player.height > asteroid.y
        ) {
          asteroids.splice(asteroidIndex, 1);
          lives--;
          livesElement.textContent = lives;
          createExplosion(asteroid.x + asteroid.width/2, asteroid.y + asteroid.height/2, '#b2bec3', 30);
          createExplosion(player.x + player.width/2, player.y + player.height/2, '#6c5ce7', 30);
          
          if (lives <= 0) {
            gameOver = true;
          }
        }
      });
      
      // Player vs powerups
      powerups.forEach((powerup, powerupIndex) => {
        if (
          player.x < powerup.x + powerup.width &&
          player.x + player.width > powerup.x &&
          player.y < powerup.y + powerup.height &&
          player.y + player.height > powerup.y
        ) {
          powerups.splice(powerupIndex, 1);
          
          if (powerup.type === 'life') {
            lives = Math.min(lives + 1, 5);
            livesElement.textContent = lives;
          } else {
            // Weapon upgrade
            player.color = '#00b894';
            setTimeout(() => {
              player.color = '#6c5ce7';
            }, 5000);
          }
        }
      });
    }
    
    // Update level
    function updateLevel() {
      const newLevel = Math.floor(score / 1000) + 1;
      if (newLevel > level) {
        level = newLevel;
        levelElement.textContent = level;
        createExplosion(canvas.width/2, canvas.height/2, '#6c5ce7', 100);
      }
    }
    
    // Game loop
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Update game time
      currentTime = Date.now() - gameStartTime;
      
      // Draw stars
      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
      for (let i = 0; i < 100; i++) {
        const x = (Date.now() / 20 + i * 10) % canvas.width;
        const y = (i * 7) % canvas.height;
        ctx.fillRect(x, y, 1, 1);
      }
      
      drawPlayer();
      drawLasers();
      drawEnemies();
      drawAsteroids();
      drawParticles();
      drawPowerups();
      
      checkCollisions();
      updateLevel();
      
      if (gameOver) {
        finalScore.textContent = score;
        finalLevel.textContent = level;
        winMessage.classList.add('show');
        gameRunning = false;
        return;
      }
      
      if (gameRunning) {
        animationId = requestAnimationFrame(gameLoop);
      }
    }
    
    // Event listeners
    document.addEventListener('keydown', e => {
      if (!gameRunning) return;
      
      switch (e.key) {
        case 'ArrowUp':
          player.y = Math.max(player.y - player.speed, 0);
          break;
        case 'ArrowDown':
          player.y = Math.min(player.y + player.speed, canvas.height - player.height);
          break;
        case 'ArrowLeft':
          player.x = Math.max(player.x - player.speed, 0);
          break;
        case 'ArrowRight':
          player.x = Math.min(player.x + player.speed, canvas.width - player.width);
          break;
        case ' ':
          // Prevent default to avoid button activation
          e.preventDefault();
          if (Date.now() - player.lastShot > 200) {
            player.lasers.push({
              x: player.x + player.width/2 - 2,
              y: player.y,
              width: 4,
              height: 15,
              speed: 10,
              color: '#a29bfe'
            });
            player.lastShot = Date.now();
          }
          break;
        case 'p':
        case 'P':
          togglePause();
          break;
      }
    });
    
    function togglePause() {
      gameRunning = !gameRunning;
      pauseButton.innerHTML = gameRunning ? 
        '<i class="fas fa-pause"></i> Pause' : 
        '<i class="fas fa-play"></i> Resume';
      
      if (gameRunning) {
        gameLoop();
      }
    }
    
    restartButton.addEventListener('click', initGame);
    pauseButton.addEventListener('click', togglePause);
    playAgainButton.addEventListener('click', initGame);
    backButton.addEventListener('click', () => {
      window.location.href = '../../index.html';
    });
    
    // Initialize the game
    initGame();
  </script>
</body>
</html>